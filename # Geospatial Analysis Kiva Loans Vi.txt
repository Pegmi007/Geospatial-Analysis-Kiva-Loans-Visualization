# Geospatial Analysis: Kiva Loans Visualization

## Table des matiÃ¨res
- [Introduction](#introduction)
- [Question 2: Visualisation mondiale des prÃªts](#question-2-visualisation-mondiale-des-prÃªts)
- [Question 3: SÃ©lection des prÃªts aux Philippines](#question-3-sÃ©lection-des-prÃªts-aux-philippines)
- [Question 4: Analyse dÃ©taillÃ©e des Philippines](#question-4-analyse-dÃ©taillÃ©e-des-philippines)
- [Installation](#installation)
- [Utilisation](#utilisation)

---

## Introduction

Ce projet prÃ©sente une analyse gÃ©ospatiale des prÃªts Kiva Ã  travers le monde, avec un focus particulier sur les Philippines. Nous utilisons GeoPandas pour manipuler et visualiser des donnÃ©es gÃ©ographiques.

---

## Question 2: Visualisation mondiale des prÃªts

### Objectif
Visualiser les emplacements des prÃªts Kiva Ã  travers le monde en utilisant les GeoDataFrames `world` et `world_loans`.

### Code de chargement des donnÃ©es

```python
# Charger les frontiÃ¨res des pays
world_filepath = gpd.datasets.get_path('naturalearth_lowres')
world = gpd.read_file(world_filepath)
world.head()
```

### Solution

```python
# Visualisation mondiale des prÃªts Kiva
ax = world.plot(figsize=(20,10), color='whitesmoke', edgecolor='black')
world_loans.plot(ax=ax, markersize=2)
```

### Explication

#### 1. CrÃ©ation de la carte de base (`world.plot()`)
- **`figsize=(20,10)`**: DÃ©finit une grande taille pour bien voir les dÃ©tails mondiaux
- **`color='whitesmoke'`**: Colore les pays en gris trÃ¨s clair pour qu'ils soient visibles sans dominer
- **`edgecolor='black'`**: Ajoute des bordures noires pour distinguer clairement les frontiÃ¨res

#### 2. Superposition des prÃªts (`world_loans.plot(ax=ax)`)
- **`ax=ax`**: **Crucial!** Cela superpose les points de prÃªts sur la mÃªme figure que la carte mondiale
- **`markersize=2`**: Utilise de petits points pour Ã©viter que les marqueurs se chevauchent trop

#### Principes clÃ©s
- **L'ordre compte**: On trace d'abord la carte de base (`world`), puis on superpose les donnÃ©es ponctuelles (`world_loans`)
- **Partage des axes**: Le paramÃ¨tre `ax=ax` permet de dessiner les deux GeoDataFrames sur le mÃªme graphique
- **LisibilitÃ©**: Les couleurs neutres pour le fond permettent aux points de donnÃ©es de ressortir

### RÃ©sultat
Cette visualisation permet de voir immÃ©diatement la distribution gÃ©ographique des prÃªts Kiva et d'identifier les rÃ©gions oÃ¹ l'activitÃ© de microcrÃ©dit est la plus concentrÃ©e.

---

## Question 3: SÃ©lection des prÃªts aux Philippines

### Objectif
CrÃ©er un GeoDataFrame `PHL_loans` contenant uniquement les prÃªts basÃ©s aux Philippines.

### Solution

```python
# Filtrer les prÃªts aux Philippines
PHL_loans = world_loans[world_loans['country'] == 'Philippines']

# VÃ©rifier la rÃ©ponse
q_3.check()
```

### Explication

#### Filtrage conditionnel de GeoDataFrame
- **`world_loans['country'] == 'Philippines'`**: CrÃ©e un masque boolÃ©en qui est `True` pour toutes les lignes oÃ¹ la colonne 'country' contient 'Philippines'
- **`world_loans[...]`**: Applique ce masque pour ne conserver que les lignes correspondantes

#### Syntaxe pandas/GeoPandas standard
- Les GeoDataFrames hÃ©ritent des fonctionnalitÃ©s de pandas DataFrames
- Le filtrage par condition boolÃ©enne est la mÃ©thode standard pour sÃ©lectionner des sous-ensembles de donnÃ©es

### Alternatives possibles

```python
# Alternative 1: Utiliser query()
PHL_loans = world_loans.query("country == 'Philippines'")

# Alternative 2: Utiliser loc[]
PHL_loans = world_loans.loc[world_loans['country'] == 'Philippines']
```

### Points importants
- âœ… **Respect de la casse**: 'Philippines' avec majuscule (pas 'philippines')
- âœ… **OpÃ©rateur de comparaison**: `==` (Ã©galitÃ©), pas `=` (assignation)
- âœ… **RÃ©sultat**: `PHL_loans` est un nouveau GeoDataFrame contenant uniquement les prÃªts philippins, avec toutes les colonnes et la gÃ©omÃ©trie prÃ©servÃ©es

### Usage
Cette sÃ©lection permet ensuite de faire des analyses ou visualisations spÃ©cifiques aux Philippines, en isolant ce sous-ensemble gÃ©ographique du dataset global.

---

## Question 4: Analyse dÃ©taillÃ©e des Philippines

### Objectif
Visualiser les prÃªts Kiva spÃ©cifiquement aux Philippines en utilisant les frontiÃ¨res dÃ©taillÃ©es des Ã®les.

### Code de chargement des donnÃ©es

```python
# Charger les frontiÃ¨res des Ã®les philippines depuis un fichier KML
gpd.io.file.fiona.drvsupport.supported_drivers['KML'] = 'rw'
PHL = gpd.read_file("../input/geospatial-learn-course-data/Philippines_AL258.kml", driver='KML')
PHL.head()
```

### Solution

```python
# Visualisation des prÃªts aux Philippines
ax = PHL.plot(figsize=(12,12), color='whitesmoke', edgecolor='gray')
PHL_loans.plot(ax=ax, markersize=2, color='red')
```

### Explication

#### 1. CrÃ©ation de la carte de base des Philippines (`PHL.plot()`)
- **`figsize=(12,12)`**: Taille carrÃ©e adaptÃ©e pour visualiser l'archipel philippin
- **`color='whitesmoke'`**: Fond clair pour les Ã®les, permettant de bien voir les contours
- **`edgecolor='gray'`**: Bordures grises pour dÃ©limiter clairement chaque Ã®le

#### 2. Superposition des points de prÃªts (`PHL_loans.plot(ax=ax)`)
- **`ax=ax`**: **Crucial** - superpose les prÃªts sur la mÃªme carte que les Ã®les
- **`markersize=2`**: Petits marqueurs pour Ã©viter le chevauchement
- **`color='red'`**: Couleur distinctive pour faire ressortir les emplacements des prÃªts

### Principes clÃ©s

1. **Contexte gÃ©ographique**: La carte `PHL` fournit le contexte (les Ã®les) sur lequel se placent les prÃªts

2. **Superposition**: Sans `ax=ax`, les deux graphiques seraient sÃ©parÃ©s au lieu d'Ãªtre superposÃ©s

3. **Contraste visuel**: 
   - Fond clair (whitesmoke) + points colorÃ©s (red) = bonne lisibilitÃ©
   - Les bordures grises aident Ã  distinguer les Ã®les sans dominer visuellement

### Insights

Cette carte permet de:
- âœ… Identifier quelles Ã®les/rÃ©gions des Philippines reÃ§oivent le plus de prÃªts Kiva
- âœ… Voir si les prÃªts sont concentrÃ©s dans les zones urbaines ou dispersÃ©s
- âœ… Comprendre la distribution gÃ©ographique de l'activitÃ© de microcrÃ©dit dans l'archipel

### Variantes acceptables

```python
# Avec d'autres couleurs et transparence
ax = PHL.plot(figsize=(12,12), color='lightblue', edgecolor='black')
PHL_loans.plot(ax=ax, markersize=3, color='darkred', alpha=0.5)
```

**ğŸ’¡ L'essentiel est de superposer correctement les deux GeoDataFrames avec `ax=ax` !**

---

## Installation

### PrÃ©requis

```bash
pip install geopandas
pip install matplotlib
pip install fiona
```

### DÃ©pendances

```python
import geopandas as gpd
import matplotlib.pyplot as plt
```

---

## Utilisation

### 1. Cloner le repository

```bash
git clone https://github.com/votre-username/kiva-loans-geospatial.git
cd kiva-loans-geospatial
```

### 2. ExÃ©cuter le notebook

```bash
jupyter notebook kiva_loans_analysis.ipynb
```

### 3. Structure du projet

```
kiva-loans-geospatial/
â”‚
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ kiva_loans_analysis.ipynb
â”œâ”€â”€ data/
â”‚   â””â”€â”€ Philippines_AL258.kml
â””â”€â”€ images/
    â”œâ”€â”€ world_loans_map.png
    â””â”€â”€ philippines_loans_map.png
```

---

## Contributeurs

- Votre Nom (@votre-username)

## Licence

Ce projet est sous licence MIT.

---

## Ressources supplÃ©mentaires

- [Documentation GeoPandas](https://geopandas.org/)
- [Kiva.org](https://www.kiva.org/)
- [Natural Earth Data](https://www.naturalearthdata.com/)

---

**Note**: Ce projet fait partie d'un cours d'apprentissage sur l'analyse gÃ©ospatiale avec Python.